<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
<link rel="stylesheet" href="/style.css" />
</head>
<body>

<div class="header2">
    <img src="https://domenebi.ge/icons/logo.svg" style="width: 130px; cursor: pointer;" class="cursor-pointer md:h-6 h-5 relative">
</div>

<nav class="navbar">
  <div class="container-fluid">
    <i class="fa fa-bell-o"></i>
    <i class="fa fa-shopping-cart">
      <span style="position: relative; right:30px; top: -11px;" class="text-span" id="count">0</span>
     </i>
    <i class="fa fa-user-o"></i>Kancha
    <i style="color: red;" class="fa fa-flag" aria-hidden="true"></i>
  </div>
</nav>

<div class="header">
    <div class="header-left">
      <a href="#home">დომენი</a>
      <a href="#contact">ტრანსფერი</a>
      <a href="#about">ჰოსტინგი</a>
      <a href="#home">Gmail</a>
      <a href="#contact">ვებგვერდი</a>
      <a href="#about">დომენის მარკეტი</a>
    </div>
    <div class="header-right">
        <a href="#home">ჩვენს შესახებ</a>
        <a href="#contact">ფასები</a>
        <a href="#about">ბლოგი</a>
        <a href="#about">დახმარება</a>
      </div>
  </div>

<div style="padding-left:2px">
    <img class="responsive" src="/images/one.png" >
</div>

<table class="table table-striped">
  <tr>
      <th  data-colname="name" data-order="desc">Name &#9650</th>
      <th  data-colname="price" data-order="desc">Price &#9650</th>
      <th  data-colname="price" data-order="desc"></th>
  </tr>
  <tbody id="myTable">
  </tbody>
</table>

<div class="col">
  <div class="card card-body">
    <input placeholder="სახელით ძიება" id="search-input" class="form-control" type="text" >
  </div>
</div>


  <!-- <div class="row">
    <div class="col-12 col-md-4">
      <div class="text-left">
        <h2 class="text-left">ფასი</h2>
        <hr>
        <div class="card-body">
          <form id="price-range-form">
            <label for="min-price" class="form-label">მინიმალური ფასი: </label>
            <span id="min-price-txt">$0</span>
            <input type="range" class="form-range" min="0" max="99" id="min-price" step="1" value="0">
            <label for="max-price" class="form-label">მაქსიმალური ფასი: </label>
            <span id="max-price-txt">$100</span>
            <input type="range" class="form-range" min="1" max="100" id="max-price" step="1" value="100">
          </form>
        </div>
      </div>
    </div>
    <tbody id="myTable">
    </tbody>
  </div> -->

  <div class="d-flex">
    <div class="wrapper">
      <header>
        <h2>ფასი</h2>
      </header>
      <form id="price-range-form">
      <div class="price-input">
        <div class="field">
          <span>Min</span>
          <input type="number" disabled class="input-min">
          <span style="position: relative;right:50px;" id="min-price-txt">0$</span>
        </div>
        <div class="separator">-</div>
        <div class="field">
          <span>Max</span>
          <input type="number" disabled class="input-max">
          <span style="position: relative;right:50px;" id="max-price-txt">100$</span>
        </div>
      </div>
      <div class="slider">
        <div class="progress"></div>
      </div>
      <div class="range-input">
        <input style="cursor: pointer;" type="range" id="min-price" class="range-min" min="0" max="100" value="0" step="1">
        <input style="cursor: pointer;" type="range" id="max-price" class="range-max" min="0" max="100" value="100" step="1">
      </div>
    </form>
      <tbody id="myTable">
      </tbody>
    </div>
    </div>  



<script>
  var myArray = [
    {
      'name':'Michael', 
      'price':'39.42', 
      'birthdate':'11/10/1989'
    },
    {
      'name':'Mila', 
      'price':'31.93', 
      'birthdate':'10/1/1989'
    },
    {
     'name':'Paul',
     'price':'49.44',
     'birthdate':'10/14/1990'
    },
    {
    'name':'Dennis', 
    'price':'65.38', 
    'birthdate':'11/29/1993'
    },
    {
    'name':'Tim', 
    'price':'27.21', 
    'birthdate':'3/12/1991'
    },
    {
    'name':'Erik', 
    'price':'73.05', 
    'birthdate':'10/31/1995'
  },
]

$('#search-input').on('keyup',function() {
  var value = $(this).val();
  console.log('Value:',value)
  var data = searchTable(value,myArray)
  buildTable(data);
})

buildTable(myArray)

function searchTable(value, data) {
  var filteredData = []

  for(var i = 0; i < data.length; i++) {
    value = value.toLowerCase()
    var name = data[i].name.toLowerCase()

    if(name.includes(value)) {
      filteredData.push(data[i])
    }
  }
  return filteredData
}

 $('th').on('click', function(){
     var column = $(this).data('colname')
     var order = $(this).data('order')
     var text = $(this).html()
     text = text.substring(0, text.length - 1);
     
     if (order == 'desc'){
        myArray = myArray.sort((a, b) => a[column] > b[column] ? 1 : -1)
        $(this).data("order","asc");
        text += '&#9660'
     }else{
        myArray = myArray.sort((a, b) => a[column] < b[column] ? 1 : -1)
        $(this).data("order","desc");
        text += '&#9650'
     }

    $(this).html(text)
    buildTable(myArray)
    })

function buildTable(data){
    var table = document.getElementById('myTable')
    table.innerHTML = ''
    for (var i = 0; i < data.length; i++){
        var colname = `name-${i}`
        var colage = `price-${i}`

        var row = `<tr>
                        <td>${data[i].name}</td>
                        <td>${data[i].price}₾</td>
                        <td><button onclick="toggle(this)" class="btn btn-success btn-xs"><span class="glyphicon glyphicon-shopping-cart"></span></button></td>
                   </tr>`
        table.innerHTML += row
    }
}

function toggle(e) {
  let txt = e.innerHTML;
  e.innerHTML = txt == `<span onclick="decrement()" class="glyphicon glyphicon-ok">ADDED</span> `
   ? `<span  class="glyphicon glyphicon-shopping-cart"></span>`
    : `<span onclick="decrement()" class="glyphicon glyphicon-ok">ADDED</span> `;
}

document.addEventListener("click",function(e){
   let btn = e.target;
   if(btn.className.includes("glyphicon glyphicon-shopping-cart")){
    plus()
    console.log(i);
   }
   else if(btn.className.includes("glyphicon glyphicon-ok")){
    minus()
    console.log(i);
   }
});

var i=0;
const plus = function(){
    i += 1;
    document.getElementById("count").innerText = i;
}
const minus = function(){
    i -= 1;
    document.getElementById("count").innerText = i;
}

function decrement() {
  console.log('Click')
}

let min_price = 0;
let max_price = 100;

$("#min-price").on("change mousemove", function () {
  min_price = parseInt($("#min-price").val());
  $("#min-price-txt").text("$" + min_price);
  showItemsFiltered();
});

$("#max-price").on("change mousemove", function () {
  max_price = parseInt($("#max-price").val());
  $("#max-price-txt").text("$" + max_price);
  showItemsFiltered();
});

function showItemsFiltered() {
  //Default grid to show all items on page load in
  $("#myTable").empty();
  for (let i = 0; i < myArray.length; i++) {
    //Go through the items but only show items that have size from show_sizes_array
    if (
      myArray[i]["price"] <= max_price &&
      myArray[i]["price"] >= min_price
    ) {
      let item_content =
      `<tr>
                        <td>${myArray[i].name}</td>
                        <td>${myArray[i].price}₾</td>
                        <td><button onclick="toggle(this)" class="btn btn-success btn-xs"><span class="glyphicon glyphicon-shopping-cart"></span></button></td>
                   </tr>`;
      $("#myTable").append(item_content); //Display in grid
    }
  }
}


</script>
</body>
</html>
